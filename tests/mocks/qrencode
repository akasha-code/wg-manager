#!/usr/bin/env bash
set -euo pipefail

# Very lightweight mock of qrencode
# Supports: qrencode -t PNG -o <file> < <conf>
#           qrencode -t ANSIUTF8 < <conf>

out_file=""
mode=""

while [[ $# -gt 0 ]]; do
  case "$1" in
    -t)
      mode="$2"; shift 2;;
    -o)
      out_file="$2"; shift 2;;
    *)
      shift;;
  esac
done

if [[ -n "$out_file" ]]; then
  mkdir -p "$(dirname "$out_file")"
  # create a dummy png marker file
  echo "PNG" > "$out_file"
else
  # ANSI mode: just consume stdin and echo a placeholder
  cat >/dev/null
  echo "[QR-ANSI-PLACEHOLDER]"
fi

exit 0

